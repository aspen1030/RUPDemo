<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>RUPDemo Digitization Guide</title>
  <meta name="description" content="RUPDemo Digitization Guide" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="RUPDemo Digitization Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="RUPDemo Digitization Guide" />
  
  
  



<meta name="date" content="2024-09-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="projorg.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="part"><span><b>I General Guidelines</b></span></li>
<li class="chapter" data-level="1" data-path="codestd.html"><a href="codestd.html"><i class="fa fa-check"></i><b>1</b> Coding Standards</a>
<ul>
<li class="chapter" data-level="1.1" data-path="codestd.html"><a href="codestd.html#starting-a-new-script"><i class="fa fa-check"></i><b>1.1</b> Starting a new script</a></li>
<li class="chapter" data-level="1.2" data-path="codestd.html"><a href="codestd.html#organizing-scripts"><i class="fa fa-check"></i><b>1.2</b> Organizing scripts</a></li>
<li class="chapter" data-level="1.3" data-path="codestd.html"><a href="codestd.html#formatting-sections-and-comments"><i class="fa fa-check"></i><b>1.3</b> Formatting sections and comments</a></li>
<li class="chapter" data-level="1.4" data-path="codestd.html"><a href="codestd.html#coding-style"><i class="fa fa-check"></i><b>1.4</b> Coding style</a></li>
<li class="chapter" data-level="1.5" data-path="codestd.html"><a href="codestd.html#writing-functions"><i class="fa fa-check"></i><b>1.5</b> Writing functions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="projorg.html"><a href="projorg.html"><i class="fa fa-check"></i><b>2</b> Project Organization</a>
<ul>
<li class="chapter" data-level="2.1" data-path="projorg.html"><a href="projorg.html#folder-organization"><i class="fa fa-check"></i><b>2.1</b> Folder organization</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="projorg.html"><a href="projorg.html#r-folder"><i class="fa fa-check"></i><b>2.1.1</b> R folder</a></li>
<li class="chapter" data-level="2.1.2" data-path="projorg.html"><a href="projorg.html#data-folder"><i class="fa fa-check"></i><b>2.1.2</b> Data folder</a></li>
<li class="chapter" data-level="2.1.3" data-path="projorg.html"><a href="projorg.html#results-folder"><i class="fa fa-check"></i><b>2.1.3</b> Results folder</a></li>
<li class="chapter" data-level="2.1.4" data-path="projorg.html"><a href="projorg.html#example-of-folder-organization"><i class="fa fa-check"></i><b>2.1.4</b> Example of folder organization</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="projorg.html"><a href="projorg.html#more-complicated-datasets"><i class="fa fa-check"></i><b>2.2</b> More complicated datasets</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="genwf.html"><a href="genwf.html"><i class="fa fa-check"></i><b>3</b> General Workflow</a>
<ul>
<li class="chapter" data-level="3.1" data-path="genwf.html"><a href="genwf.html#incoming-candidates-for-digitization"><i class="fa fa-check"></i><b>3.1</b> Incoming candidates for digitization</a></li>
<li class="chapter" data-level="3.2" data-path="genwf.html"><a href="genwf.html#selecting-a-new-project"><i class="fa fa-check"></i><b>3.2</b> Selecting a new project</a></li>
<li class="chapter" data-level="3.3" data-path="genwf.html"><a href="genwf.html#supply-list"><i class="fa fa-check"></i><b>3.3</b> Supply list</a></li>
<li class="chapter" data-level="3.4" data-path="genwf.html"><a href="genwf.html#general-workflow-outline"><i class="fa fa-check"></i><b>3.4</b> General workflow outline</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="genwf.html"><a href="genwf.html#read-the-publication"><i class="fa fa-check"></i><b>3.4.1</b> 1. Read the publication</a></li>
<li class="chapter" data-level="3.4.2" data-path="genwf.html"><a href="genwf.html#sketch-an-outline-of-the-ipm"><i class="fa fa-check"></i><b>3.4.2</b> 2. Sketch an outline of the IPM</a></li>
<li class="chapter" data-level="3.4.3" data-path="genwf.html"><a href="genwf.html#list-the-equations-and-parameters-needed-to-recreate-the-ipm"><i class="fa fa-check"></i><b>3.4.3</b> 3. List the equations and parameters needed to recreate the IPM</a></li>
<li class="chapter" data-level="3.4.4" data-path="genwf.html"><a href="genwf.html#take-inventory"><i class="fa fa-check"></i><b>3.4.4</b> 4. Take inventory</a></li>
<li class="chapter" data-level="3.4.5" data-path="genwf.html"><a href="genwf.html#create-a-new-r-project"><i class="fa fa-check"></i><b>3.4.5</b> 5. Create a new R project</a></li>
<li class="chapter" data-level="3.4.6" data-path="genwf.html"><a href="genwf.html#script-01_dataformatting.r"><i class="fa fa-check"></i><b>3.4.6</b> 6. Script: 01_DataFormatting.R</a></li>
<li class="chapter" data-level="3.4.7" data-path="genwf.html"><a href="genwf.html#script-02_plotrawdata.r"><i class="fa fa-check"></i><b>3.4.7</b> 7. Script: 02_PlotRawData.R</a></li>
<li class="chapter" data-level="3.4.8" data-path="genwf.html"><a href="genwf.html#script-03_vitalratemodels.r"><i class="fa fa-check"></i><b>3.4.8</b> 8. Script: 03_VitalRateModels.R</a></li>
<li class="chapter" data-level="3.4.9" data-path="genwf.html"><a href="genwf.html#script-04_ipmscratch.r"><i class="fa fa-check"></i><b>3.4.9</b> 9. Script: 04_IPMScratch.R</a></li>
<li class="chapter" data-level="3.4.10" data-path="genwf.html"><a href="genwf.html#script-05_ipmr.r"><i class="fa fa-check"></i><b>3.4.10</b> 10. Script: 05_ipmr.R</a></li>
<li class="chapter" data-level="3.4.11" data-path="genwf.html"><a href="genwf.html#script-06_padrino.r"><i class="fa fa-check"></i><b>3.4.11</b> 11. Script: 06_PADRINO.R</a></li>
<li class="chapter" data-level="3.4.12" data-path="genwf.html"><a href="genwf.html#final-steps-of-digitization"><i class="fa fa-check"></i><b>3.4.12</b> 12. Final steps of digitization</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="genwf.html"><a href="genwf.html#why-do-we-construct-the-ipm-twice"><i class="fa fa-check"></i><b>3.5</b> Why do we construct the IPM twice?</a></li>
<li class="chapter" data-level="3.6" data-path="genwf.html"><a href="genwf.html#useful-links"><i class="fa fa-check"></i><b>3.6</b> Useful links</a></li>
</ul></li>
<li class="part"><span><b>II Adler Dataset Example</b></span></li>
<li class="chapter" data-level="4" data-path="adwf.html"><a href="adwf.html"><i class="fa fa-check"></i><b>4</b> Adler Dataset: Example of Workflow</a>
<ul>
<li class="chapter" data-level="4.1" data-path="adwf.html"><a href="adwf.html#introduction-to-the-adler-dataset"><i class="fa fa-check"></i><b>4.1</b> Introduction to the Adler dataset</a></li>
<li class="chapter" data-level="4.2" data-path="adwf.html"><a href="adwf.html#publications-featuring-the-adler-dataset"><i class="fa fa-check"></i><b>4.2</b> Publications featuring the Adler dataset</a></li>
<li class="chapter" data-level="4.3" data-path="adwf.html"><a href="adwf.html#planttracker"><i class="fa fa-check"></i><b>4.3</b> plantTracker</a></li>
<li class="chapter" data-level="4.4" data-path="adwf.html"><a href="adwf.html#workflow-with-example-dataset"><i class="fa fa-check"></i><b>4.4</b> Workflow with example dataset</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="adwf.html"><a href="adwf.html#reading-the-publications"><i class="fa fa-check"></i><b>4.4.1</b> 1. Reading the publications</a></li>
<li class="chapter" data-level="4.4.2" data-path="adwf.html"><a href="adwf.html#sketching-an-outline-of-the-ipm"><i class="fa fa-check"></i><b>4.4.2</b> 2. Sketching an outline of the IPM</a></li>
<li class="chapter" data-level="4.4.3" data-path="adwf.html"><a href="adwf.html#making-the-parameter-shopping-list"><i class="fa fa-check"></i><b>4.4.3</b> 3. Making the parameter “shopping list”</a></li>
<li class="chapter" data-level="4.4.4" data-path="adwf.html"><a href="adwf.html#taking-inventory"><i class="fa fa-check"></i><b>4.4.4</b> 4. Taking inventory</a></li>
<li class="chapter" data-level="4.4.5" data-path="adwf.html"><a href="adwf.html#creating-a-new-r-project"><i class="fa fa-check"></i><b>4.4.5</b> 5. Creating a new R project</a></li>
<li class="chapter" data-level="4.4.6" data-path="adwf.html"><a href="adwf.html#data-formatting"><i class="fa fa-check"></i><b>4.4.6</b> 6. Data formatting</a></li>
<li class="chapter" data-level="4.4.7" data-path="adwf.html"><a href="adwf.html#plotting-the-raw-data"><i class="fa fa-check"></i><b>4.4.7</b> 7. Plotting the raw data</a></li>
<li class="chapter" data-level="4.4.8" data-path="adwf.html"><a href="adwf.html#fitting-vital-rate-models-for-the-mean-ipm"><i class="fa fa-check"></i><b>4.4.8</b> 8. Fitting vital rate models for the mean IPM</a></li>
<li class="chapter" data-level="4.4.9" data-path="adwf.html"><a href="adwf.html#buildipm4"><i class="fa fa-check"></i><b>4.4.9</b> 9. Building the IPM from scratch</a></li>
<li class="chapter" data-level="4.4.10" data-path="adwf.html"><a href="adwf.html#ipmr4"><i class="fa fa-check"></i><b>4.4.10</b> 10. Building the IPM with <code>ipmr</code></a></li>
<li class="chapter" data-level="4.4.11" data-path="adwf.html"><a href="adwf.html#populating-the-padrino-database-template"><i class="fa fa-check"></i><b>4.4.11</b> 11. Populating the PADRINO database template</a></li>
<li class="chapter" data-level="4.4.12" data-path="adwf.html"><a href="adwf.html#finishing-up-the-digitization-project"><i class="fa fa-check"></i><b>4.4.12</b> 12. Finishing up the digitization project</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="adex.html"><a href="adex.html"><i class="fa fa-check"></i><b>5</b> Adler Dataset: Extensions to the Mean IPM</a>
<ul>
<li class="chapter" data-level="5.1" data-path="adex.html"><a href="adex.html#exploring-our-options"><i class="fa fa-check"></i><b>5.1</b> Exploring our options</a></li>
<li class="chapter" data-level="5.2" data-path="adex.html"><a href="adex.html#plotting-by-year-x-treatment"><i class="fa fa-check"></i><b>5.2</b> Plotting by year x treatment</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="adyr.html"><a href="adyr.html"><i class="fa fa-check"></i><b>6</b> Adler Dataset: Extensions to the Mean IPM - Incorporating Year</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="adyr.html"><a href="adyr.html#making-the-parameter-shopping-list-1"><i class="fa fa-check"></i><b>6.0.1</b> 3. Making the parameter “shopping list”</a></li>
<li class="chapter" data-level="6.0.2" data-path="adyr.html"><a href="adyr.html#creating-new-folders-in-the-r-project"><i class="fa fa-check"></i><b>6.0.2</b> 5. Creating new folders in the R project</a></li>
<li class="chapter" data-level="6.0.3" data-path="adyr.html"><a href="adyr.html#data-formatting-1"><i class="fa fa-check"></i><b>6.0.3</b> 6. Data formatting</a></li>
<li class="chapter" data-level="6.0.4" data-path="adyr.html"><a href="adyr.html#plotting-the-raw-data-by-year"><i class="fa fa-check"></i><b>6.0.4</b> 7. Plotting the raw data by year</a></li>
<li class="chapter" data-level="6.0.5" data-path="adyr.html"><a href="adyr.html#fitting-vital-rate-models-with-the-random-effect-of-year"><i class="fa fa-check"></i><b>6.0.5</b> 8. Fitting vital rate models with the random effect of year</a></li>
<li class="chapter" data-level="6.0.6" data-path="adyr.html"><a href="adyr.html#building-the-year-specific-ipms-from-scratch"><i class="fa fa-check"></i><b>6.0.6</b> 9. Building the year-specific IPMs from scratch</a></li>
<li class="chapter" data-level="6.0.7" data-path="adyr.html"><a href="adyr.html#building-the-year-specific-ipms-with-ipmr"><i class="fa fa-check"></i><b>6.0.7</b> 10. Building the year-specific IPMs with <code>ipmr</code></a></li>
<li class="chapter" data-level="6.0.8" data-path="adyr.html"><a href="adyr.html#populating-the-padrino-database-template-1"><i class="fa fa-check"></i><b>6.0.8</b> 11. Populating the PADRINO database template</a></li>
<li class="chapter" data-level="6.0.9" data-path="adyr.html"><a href="adyr.html#finishing-up-the-digitization-project-1"><i class="fa fa-check"></i><b>6.0.9</b> 12. Finishing up the digitization project</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RUPDemo Digitization Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">RUPDemo Digitization Guide</h1>
<p class="date"><em>2024-09-11</em></p>
</div>
<div id="codestd" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Coding Standards<a href="codestd.html#codestd" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This document defines standard for formatting and organizing scripts, as well as guidelines for coding style to promote readability and consistency in our scripts. Shared standards will facilitate clear communication across the workflow of the RUPDemo project. These standards are derived from the <a href="https://style.tidyverse.org/index.html">tidyverse style guide</a>.</p>
<div id="starting-a-new-script" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Starting a new script<a href="codestd.html#starting-a-new-script" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The first step of starting a new script is to give the file a short, descriptive name. The name should ideally begin with a number indicating the order in which the scripts have been written within the project followed by an underscore and a few words describing the main function of the script. More information about when to start a new script and how to organize a project can be found in Chapter <a href="projorg.html#projorg">2</a> : Project Organization.</p>
<p>Start the script by providing metadata about the script. Here is an example of the first 18 lines of a draft of this document:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="codestd.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standards for writing code for RUPDemo</span></span>
<span id="cb1-2"><a href="codestd.html#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="codestd.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Aspen Workman</span></span>
<span id="cb1-4"><a href="codestd.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summer 2024</span></span>
<span id="cb1-5"><a href="codestd.html#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="codestd.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># The following script provides guidelines and standards for writing code and</span></span>
<span id="cb1-7"><a href="codestd.html#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># formatting scripts for the RUPDemo project using a demo dataset. </span></span>
<span id="cb1-8"><a href="codestd.html#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="codestd.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>( <span class="at">list =</span> <span class="fu">ls</span>() )</span>
<span id="cb1-10"><a href="codestd.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>( <span class="at">stringsAsFactors =</span> F )</span>
<span id="cb1-11"><a href="codestd.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>( tidyverse )</span>
<span id="cb1-12"><a href="codestd.html#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>( ggplot2 )</span>
<span id="cb1-13"><a href="codestd.html#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>( patchwork )</span>
<span id="cb1-14"><a href="codestd.html#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="codestd.html#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="codestd.html#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Data -------------------------------------------------------------------------</span></span>
<span id="cb1-17"><a href="codestd.html#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="codestd.html#cb1-18" aria-hidden="true" tabindex="-1"></a>demo_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>( <span class="st">&quot;https://raw.githubusercontent.com/aspen1030/RUPDemo/main/demo.csv&quot;</span> )</span></code></pre></div>
<p>Let’s break down the sections which should be included before any content:</p>
<ul>
<li><p>Title: The title of the script communicates what the script aims to accomplish, or what makes it different from similar scripts.</p></li>
<li><p>Author: Who wrote the script? Include your full name and the name(s) of anyone else who contributed sections of the code. If you are pasting in code from someone else’s script in the group, include their name.</p></li>
<li><p>Date: About when were you working on this script? Give a general date.</p></li>
<li><p>Short description of the script: If your title is informative enough, then you may not need any other description. However, sometimes it is useful to provide more details about the script in order to properly differentiate it from other scripts, i.e. which version of the model are you working on? Which dataset does this script rely on, and what makes it different? What assumptions are you making about the model? Does this script only focus on a single species from a multi-species publication? This is also the section where you would include the DOI and other citation information in your data formatting script.</p></li>
<li><p>Libraries: Clean up the environment if needed, configure settings, and list the packages you will use. Do not load packages in the middle of the script; if you find yourself needing a different package, make sure to scroll back to the top of your script and add it to the list!</p></li>
<li><p>Data: Under a new section header, import the data that you will use in the script. As with packages, do not import new data in the middle of the script; add them to the Data section in the beginning even if you don’t need them until later!</p></li>
</ul>
<p>After these beginning sections, add a new section header to describe the first step of your script and begin writing!</p>
</div>
<div id="organizing-scripts" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Organizing scripts<a href="codestd.html#organizing-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use section headers (example below) to initialize a new section of your script. These headers can help you navigate through your script by opening the document outline (top right icon in Source pane).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="codestd.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fitting linear models --------------------------------------------------------</span></span></code></pre></div>
<p>Avoid nesting of headers. The headers should describe the overall goal of a section of code, and they should not be a line-by-line commentary. Avoid using subheaders to describe each step; simply use a comment line to describe the next step.</p>
<p>Dividing your script into sections can be somewhat arbitrary. The main goal is to maintain continuity within a project. Be consistent with other scripts you’ve written, and aim to have fewer sections rather than too many.</p>
</div>
<div id="formatting-sections-and-comments" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Formatting sections and comments<a href="codestd.html#formatting-sections-and-comments" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The main things to keep in mind when writing a new script are readability and consistency. Try to keep all text within the document bounds (line on right side). Use spaces and blank lines to break things up and be consistent throughout the entire script.</p>
<p>Section headers should be followed by a blank line before any comments or code begin. End a section with two blank lines before the next section header.</p>
<p>Use single blank lines throughout a section to separate different chunks of code.</p>
<p>Comments should always come before the chunk of code they refer to. Begin a comment and include a space after the <code>#</code> before writing any text. Do not put a blank line between a comment and the code it describes. Not all code needs comments, but it is nice to keep track of what you are doing. Comments extending onto a second line should be indented with a tab.</p>
<p>Comments can also be written inside of multi-line piping or ggplots to explain different parts of the code as necessary. Embedded comments should be aligned with the code and presented on their own line(s) before the line the comment explains. Ex.:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="codestd.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data formatting --------------------------------------------------------------</span></span>
<span id="cb3-2"><a href="codestd.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="codestd.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset the data for 2008 and 2009, group the data by species, and calculate</span></span>
<span id="cb3-4"><a href="codestd.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the mean change in size for each species</span></span>
<span id="cb3-5"><a href="codestd.html#cb3-5" aria-hidden="true" tabindex="-1"></a>mean_growth_2008 <span class="ot">&lt;-</span> demo_df <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="codestd.html#cb3-6" aria-hidden="true" tabindex="-1"></a>                      <span class="co"># select only data from the year 2008</span></span>
<span id="cb3-7"><a href="codestd.html#cb3-7" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">subset</span>( year <span class="sc">==</span> <span class="dv">2008</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="codestd.html#cb3-8" aria-hidden="true" tabindex="-1"></a>                      <span class="co"># group the data by species</span></span>
<span id="cb3-9"><a href="codestd.html#cb3-9" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">group_by</span>( species ) <span class="sc">%&gt;%</span> </span>
<span id="cb3-10"><a href="codestd.html#cb3-10" aria-hidden="true" tabindex="-1"></a>                      <span class="co"># calculate the mean change in size for each species</span></span>
<span id="cb3-11"><a href="codestd.html#cb3-11" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">summarize</span>( <span class="at">mean_growth =</span> <span class="fu">mean</span>( delta_size ) )</span>
<span id="cb3-12"><a href="codestd.html#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="codestd.html#cb3-13" aria-hidden="true" tabindex="-1"></a>mean_growth_2009 <span class="ot">&lt;-</span> demo_df <span class="sc">%&gt;%</span> </span>
<span id="cb3-14"><a href="codestd.html#cb3-14" aria-hidden="true" tabindex="-1"></a>                      <span class="co"># no need to add comments here because it&#39;s the same code</span></span>
<span id="cb3-15"><a href="codestd.html#cb3-15" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">subset</span>( year <span class="sc">==</span> <span class="dv">2009</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="codestd.html#cb3-16" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">group_by</span>( species ) <span class="sc">%&gt;%</span> </span>
<span id="cb3-17"><a href="codestd.html#cb3-17" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">summarize</span>( <span class="at">mean_growth =</span> <span class="fu">mean</span>( delta_size ) )</span></code></pre></div>
</div>
<div id="coding-style" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Coding style<a href="codestd.html#coding-style" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Again, please prioritize readability and maintain consistency as you code. Everyone has their own style of coding, and these guidelines should serve as a starting point to keep everything clear and consistent.</p>
<p>Use spaces between all separate objects and operators, including as a buffer around objects within parentheses. Ex.:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="codestd.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># General example: function( object ) * function( object )</span></span>
<span id="cb4-2"><a href="codestd.html#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="codestd.html#cb4-3" aria-hidden="true" tabindex="-1"></a>growth_a_2010 <span class="ot">&lt;-</span> demo_df <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="codestd.html#cb4-4" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">subset</span>( year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> species <span class="sc">==</span> <span class="st">&quot;A&quot;</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="codestd.html#cb4-5" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">percent_change =</span> ( delta_size <span class="sc">/</span> size_t0 ) <span class="sc">*</span> <span class="dv">100</span> )</span></code></pre></div>
<p>In longer chunks of code, align all <code>&lt;-</code> and be sure to put spaces before and after the <code>&lt;-</code>. In general, keep all code aligned in easy-to-read columns and don’t be afraid to break up function inputs across multiple lines. Again, try to keep everything within the document bounds. Ex.:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="codestd.html#cb5-1" aria-hidden="true" tabindex="-1"></a>growth_a      <span class="ot">&lt;-</span> demo_df <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="codestd.html#cb5-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">subset</span>( species <span class="sc">==</span> <span class="st">&quot;A&quot;</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="codestd.html#cb5-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">percent_change =</span> ( delta_size <span class="sc">/</span> size_t0 ) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb5-4"><a href="codestd.html#cb5-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">log_size_t0    =</span> <span class="fu">log</span>( size_t0 ) )</span>
<span id="cb5-5"><a href="codestd.html#cb5-5" aria-hidden="true" tabindex="-1"></a>growth_b_2012 <span class="ot">&lt;-</span> demo_df <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="codestd.html#cb5-6" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">subset</span>( species <span class="sc">==</span> <span class="st">&quot;B&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2012</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="codestd.html#cb5-7" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">percent_change =</span> ( delta_size <span class="sc">/</span> size_t0 ) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb5-8"><a href="codestd.html#cb5-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">log_size_t0    =</span> <span class="fu">log</span>( size_t0 ) )</span></code></pre></div>
<p>Give your objects and functions short but descriptive names. Do not use capital letters. Use underscores (_) as separators in object names; do not use periods, as they can cause issues with certain functions. Use “_df” and “_list” or other easy to understand conventions as suffixes to name similar objects of different types. Be descriptive whenever possible and avoid using general names. Numbers should only be used when they are meaningful, i.e. to indicate the year in the previous examples. Never use names like “df3” unless you are creating a temporary object to test out a function you are working on and excluding the temporary object from the script will not impact the functionality of the script.</p>
</div>
<div id="writing-functions" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Writing functions<a href="codestd.html#writing-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You should organize the code using functions whenever possible. As a rule of thumb, when the same operation is repeated twice, then use a function to perform it! This will save time when you notice an error in the input or want to test out different subsets of the data, for example.</p>
<p>Instead of writing a for loop, write a <code>function( i )</code> and then use <code>lapply( 1:n, function )</code> to run the function n times. Ex.:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="codestd.html#cb6-1" aria-hidden="true" tabindex="-1"></a>mean_growth_species <span class="ot">&lt;-</span> <span class="cf">function</span>( i ) {</span>
<span id="cb6-2"><a href="codestd.html#cb6-2" aria-hidden="true" tabindex="-1"></a>            sp_temp <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span> )[i]</span>
<span id="cb6-3"><a href="codestd.html#cb6-3" aria-hidden="true" tabindex="-1"></a>            df_temp <span class="ot">&lt;-</span> demo_df <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="codestd.html#cb6-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">subset</span>( species <span class="sc">==</span> sp_temp ) <span class="sc">%&gt;%</span> </span>
<span id="cb6-5"><a href="codestd.html#cb6-5" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">group_by</span>( year ) <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a href="codestd.html#cb6-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">summarize</span>( <span class="at">mean_growth =</span> <span class="fu">mean</span>( delta_size ) )</span>
<span id="cb6-7"><a href="codestd.html#cb6-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-8"><a href="codestd.html#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>( df_temp )</span>
<span id="cb6-9"><a href="codestd.html#cb6-9" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb6-10"><a href="codestd.html#cb6-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-11"><a href="codestd.html#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="codestd.html#cb6-12" aria-hidden="true" tabindex="-1"></a>mean_growth_list        <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, mean_growth_species )</span>
<span id="cb6-13"><a href="codestd.html#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mean_growth_list) <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span> )</span>
<span id="cb6-14"><a href="codestd.html#cb6-14" aria-hidden="true" tabindex="-1"></a>mean_growth_df          <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>( mean_growth_list, <span class="at">.id =</span> <span class="st">&quot;id&quot;</span> )</span></code></pre></div>
<p>Do whatever you can to avoid writing nested for loops. Many times, ecological data is nested - in our case, multiple sites within years. In most, if not all of these cases, you can avoid writing nested loops using the function <code>expand.grid( )</code> to create a dataframe including every combination of two variables, and then use <code>lapply( )</code> to apply a function across all levels of combinations instead of writing a nested for loop. Ex. (only for the years 2005-2008):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="codestd.html#cb7-1" aria-hidden="true" tabindex="-1"></a>design_df    <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>( <span class="at">sp_i =</span> <span class="fu">c</span>( <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span> ),</span>
<span id="cb7-2"><a href="codestd.html#cb7-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">yr_i =</span> <span class="dv">2005</span><span class="sc">:</span><span class="dv">2008</span> )</span>
<span id="cb7-3"><a href="codestd.html#cb7-3" aria-hidden="true" tabindex="-1"></a>plot_growth  <span class="ot">&lt;-</span> <span class="cf">function</span>( i ) {</span>
<span id="cb7-4"><a href="codestd.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  temp_df    <span class="ot">&lt;-</span> demo_df <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="codestd.html#cb7-5" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">subset</span>( species <span class="sc">==</span> design_df<span class="sc">$</span>sp_i[i] <span class="sc">&amp;</span> </span>
<span id="cb7-6"><a href="codestd.html#cb7-6" aria-hidden="true" tabindex="-1"></a>                          year    <span class="sc">==</span> design_df<span class="sc">$</span>yr_i[i] )</span>
<span id="cb7-7"><a href="codestd.html#cb7-7" aria-hidden="true" tabindex="-1"></a>  temp_mod   <span class="ot">&lt;-</span> <span class="fu">lm</span>( size_t1 <span class="sc">~</span> size_t0, <span class="at">data =</span> temp_df )</span>
<span id="cb7-8"><a href="codestd.html#cb7-8" aria-hidden="true" tabindex="-1"></a>  pred_df    <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="at">size_t1_pred =</span> <span class="fu">predict</span>( temp_mod, temp_df ),</span>
<span id="cb7-9"><a href="codestd.html#cb7-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">size_t0 =</span> temp_df<span class="sc">$</span>size_t0 )</span>
<span id="cb7-10"><a href="codestd.html#cb7-10" aria-hidden="true" tabindex="-1"></a>  year_temp  <span class="ot">&lt;-</span> <span class="fu">paste0</span>( design_df<span class="sc">$</span>yr_i[i] )</span>
<span id="cb7-11"><a href="codestd.html#cb7-11" aria-hidden="true" tabindex="-1"></a>  sp_temp    <span class="ot">&lt;-</span> <span class="fu">paste0</span>( design_df<span class="sc">$</span>sp_i[i] )</span>
<span id="cb7-12"><a href="codestd.html#cb7-12" aria-hidden="true" tabindex="-1"></a>  plot_out   <span class="ot">&lt;-</span> temp_df <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>( <span class="fu">aes</span>( <span class="at">x =</span> size_t0, <span class="at">y =</span> size_t1 ) ) <span class="sc">+</span></span>
<span id="cb7-13"><a href="codestd.html#cb7-13" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">geom_point</span>( ) <span class="sc">+</span></span>
<span id="cb7-14"><a href="codestd.html#cb7-14" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">labs</span>( <span class="at">x =</span> <span class="st">&quot;Size at t0&quot;</span>,</span>
<span id="cb7-15"><a href="codestd.html#cb7-15" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">y =</span> <span class="st">&quot;Size at t1&quot;</span>,</span>
<span id="cb7-16"><a href="codestd.html#cb7-16" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">title =</span> <span class="fu">paste</span>( <span class="st">&quot;Species&quot;</span>, </span>
<span id="cb7-17"><a href="codestd.html#cb7-17" aria-hidden="true" tabindex="-1"></a>                                                   sp_temp, </span>
<span id="cb7-18"><a href="codestd.html#cb7-18" aria-hidden="true" tabindex="-1"></a>                                                   year_temp, </span>
<span id="cb7-19"><a href="codestd.html#cb7-19" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">sep =</span> <span class="st">&quot; &quot;</span> ) ) <span class="sc">+</span></span>
<span id="cb7-20"><a href="codestd.html#cb7-20" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">geom_line</span>( <span class="at">color =</span> <span class="st">&#39;red&#39;</span>, </span>
<span id="cb7-21"><a href="codestd.html#cb7-21" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">data =</span> pred_df, </span>
<span id="cb7-22"><a href="codestd.html#cb7-22" aria-hidden="true" tabindex="-1"></a>                                         <span class="fu">aes</span>( <span class="at">x =</span> size_t0, </span>
<span id="cb7-23"><a href="codestd.html#cb7-23" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">y =</span> size_t1_pred ) ) <span class="sc">+</span></span>
<span id="cb7-24"><a href="codestd.html#cb7-24" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">geom_abline</span>( <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span> ) <span class="sc">+</span></span>
<span id="cb7-25"><a href="codestd.html#cb7-25" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">theme_bw</span>( )</span>
<span id="cb7-26"><a href="codestd.html#cb7-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-27"><a href="codestd.html#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>( plot_out )</span>
<span id="cb7-28"><a href="codestd.html#cb7-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-29"><a href="codestd.html#cb7-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-30"><a href="codestd.html#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="codestd.html#cb7-31" aria-hidden="true" tabindex="-1"></a>growth_plots <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span> <span class="dv">8</span>, plot_growth )</span>
<span id="cb7-32"><a href="codestd.html#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="fu">wrap_plots</span>( growth_plots ) <span class="sc">+</span> <span class="fu">plot_layout</span>( <span class="at">ncol =</span> <span class="dv">2</span> )</span></code></pre></div>
<p><img src="rupdemo-webpage_files/figure-html/unnamed-chunk-9-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>Each function is evaluated in its own environment which is not the global environment. Use <code>&lt;&lt;-</code> to assign objects to the global environment within a function (object will appear in the list in the Environment pane). Use <code>&lt;-</code> to assign objects within the function’s environment (object will not appear in the Environment pane and will only exist when you call of the function).</p>
<p>Functions can contain complex conditional syntax, i.e. chains of <code>if else</code> statements to perform different actions under certain circumstances.</p>
<p>In general, a function should perform a single action; write multiple functions to string together instead of nesting multiple complex actions within the same function.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="projorg.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
