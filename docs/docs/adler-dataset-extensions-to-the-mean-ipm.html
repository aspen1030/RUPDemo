<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Adler Dataset: Extensions to the Mean IPM | RUPDemo Digitization Guide</title>
  <meta name="description" content="5 Adler Dataset: Extensions to the Mean IPM | RUPDemo Digitization Guide" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Adler Dataset: Extensions to the Mean IPM | RUPDemo Digitization Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Adler Dataset: Extensions to the Mean IPM | RUPDemo Digitization Guide" />
  
  
  



<meta name="date" content="2024-09-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="adler-dataset-example-of-workflow.html"/>
<link rel="next" href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="part"><span><b>I General Guidelines</b></span></li>
<li class="chapter" data-level="1" data-path="coding-standards.html"><a href="coding-standards.html"><i class="fa fa-check"></i><b>1</b> Coding Standards</a>
<ul>
<li class="chapter" data-level="1.1" data-path="coding-standards.html"><a href="coding-standards.html#starting-a-new-script"><i class="fa fa-check"></i><b>1.1</b> Starting a new script</a></li>
<li class="chapter" data-level="1.2" data-path="coding-standards.html"><a href="coding-standards.html#organizing-scripts"><i class="fa fa-check"></i><b>1.2</b> Organizing scripts</a></li>
<li class="chapter" data-level="1.3" data-path="coding-standards.html"><a href="coding-standards.html#formatting-sections-and-comments"><i class="fa fa-check"></i><b>1.3</b> Formatting sections and comments</a></li>
<li class="chapter" data-level="1.4" data-path="coding-standards.html"><a href="coding-standards.html#coding-style"><i class="fa fa-check"></i><b>1.4</b> Coding style</a></li>
<li class="chapter" data-level="1.5" data-path="coding-standards.html"><a href="coding-standards.html#writing-functions"><i class="fa fa-check"></i><b>1.5</b> Writing functions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="project-organization.html"><a href="project-organization.html"><i class="fa fa-check"></i><b>2</b> Project Organization</a>
<ul>
<li class="chapter" data-level="2.1" data-path="project-organization.html"><a href="project-organization.html#folder-organization"><i class="fa fa-check"></i><b>2.1</b> Folder organization</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="project-organization.html"><a href="project-organization.html#r-folder"><i class="fa fa-check"></i><b>2.1.1</b> R folder</a></li>
<li class="chapter" data-level="2.1.2" data-path="project-organization.html"><a href="project-organization.html#data-folder"><i class="fa fa-check"></i><b>2.1.2</b> Data folder</a></li>
<li class="chapter" data-level="2.1.3" data-path="project-organization.html"><a href="project-organization.html#results-folder"><i class="fa fa-check"></i><b>2.1.3</b> Results folder</a></li>
<li class="chapter" data-level="2.1.4" data-path="project-organization.html"><a href="project-organization.html#example-of-folder-organization"><i class="fa fa-check"></i><b>2.1.4</b> Example of folder organization</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="project-organization.html"><a href="project-organization.html#more-complicated-datasets"><i class="fa fa-check"></i><b>2.2</b> More complicated datasets</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="general-workflow.html"><a href="general-workflow.html"><i class="fa fa-check"></i><b>3</b> General Workflow</a>
<ul>
<li class="chapter" data-level="3.1" data-path="general-workflow.html"><a href="general-workflow.html#incoming-candidates-for-digitization"><i class="fa fa-check"></i><b>3.1</b> Incoming candidates for digitization</a></li>
<li class="chapter" data-level="3.2" data-path="general-workflow.html"><a href="general-workflow.html#selecting-a-new-project"><i class="fa fa-check"></i><b>3.2</b> Selecting a new project</a></li>
<li class="chapter" data-level="3.3" data-path="general-workflow.html"><a href="general-workflow.html#supply-list"><i class="fa fa-check"></i><b>3.3</b> Supply list</a></li>
<li class="chapter" data-level="3.4" data-path="general-workflow.html"><a href="general-workflow.html#general-workflow-outline"><i class="fa fa-check"></i><b>3.4</b> General workflow outline</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="general-workflow.html"><a href="general-workflow.html#read-the-publication"><i class="fa fa-check"></i><b>3.4.1</b> 1. Read the publication</a></li>
<li class="chapter" data-level="3.4.2" data-path="general-workflow.html"><a href="general-workflow.html#sketch-an-outline-of-the-ipm"><i class="fa fa-check"></i><b>3.4.2</b> 2. Sketch an outline of the IPM</a></li>
<li class="chapter" data-level="3.4.3" data-path="general-workflow.html"><a href="general-workflow.html#list-the-equations-and-parameters-needed-to-recreate-the-ipm"><i class="fa fa-check"></i><b>3.4.3</b> 3. List the equations and parameters needed to recreate the IPM</a></li>
<li class="chapter" data-level="3.4.4" data-path="general-workflow.html"><a href="general-workflow.html#take-inventory"><i class="fa fa-check"></i><b>3.4.4</b> 4. Take inventory</a></li>
<li class="chapter" data-level="3.4.5" data-path="general-workflow.html"><a href="general-workflow.html#create-a-new-r-project"><i class="fa fa-check"></i><b>3.4.5</b> 5. Create a new R project</a></li>
<li class="chapter" data-level="3.4.6" data-path="general-workflow.html"><a href="general-workflow.html#script-01_dataformatting.r"><i class="fa fa-check"></i><b>3.4.6</b> 6. Script: 01_DataFormatting.R</a></li>
<li class="chapter" data-level="3.4.7" data-path="general-workflow.html"><a href="general-workflow.html#script-02_plotrawdata.r"><i class="fa fa-check"></i><b>3.4.7</b> 7. Script: 02_PlotRawData.R</a></li>
<li class="chapter" data-level="3.4.8" data-path="general-workflow.html"><a href="general-workflow.html#script-03_vitalratemodels.r"><i class="fa fa-check"></i><b>3.4.8</b> 8. Script: 03_VitalRateModels.R</a></li>
<li class="chapter" data-level="3.4.9" data-path="general-workflow.html"><a href="general-workflow.html#script-04_ipmscratch.r"><i class="fa fa-check"></i><b>3.4.9</b> 9. Script: 04_IPMScratch.R</a></li>
<li class="chapter" data-level="3.4.10" data-path="general-workflow.html"><a href="general-workflow.html#script-05_ipmr.r"><i class="fa fa-check"></i><b>3.4.10</b> 10. Script: 05_ipmr.R</a></li>
<li class="chapter" data-level="3.4.11" data-path="general-workflow.html"><a href="general-workflow.html#script-06_padrino.r"><i class="fa fa-check"></i><b>3.4.11</b> 11. Script: 06_PADRINO.R</a></li>
<li class="chapter" data-level="3.4.12" data-path="general-workflow.html"><a href="general-workflow.html#final-steps-of-digitization"><i class="fa fa-check"></i><b>3.4.12</b> 12. Final steps of digitization</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="general-workflow.html"><a href="general-workflow.html#why-do-we-construct-the-ipm-twice"><i class="fa fa-check"></i><b>3.5</b> Why do we construct the IPM twice?</a></li>
<li class="chapter" data-level="3.6" data-path="general-workflow.html"><a href="general-workflow.html#useful-links"><i class="fa fa-check"></i><b>3.6</b> Useful links</a></li>
</ul></li>
<li class="part"><span><b>II Adler Dataset Example</b></span></li>
<li class="chapter" data-level="4" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html"><i class="fa fa-check"></i><b>4</b> Adler Dataset: Example of Workflow</a>
<ul>
<li class="chapter" data-level="4.1" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#introduction-to-the-adler-dataset"><i class="fa fa-check"></i><b>4.1</b> Introduction to the Adler dataset</a></li>
<li class="chapter" data-level="4.2" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#publications-featuring-the-adler-dataset"><i class="fa fa-check"></i><b>4.2</b> Publications featuring the Adler dataset</a></li>
<li class="chapter" data-level="4.3" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#planttracker"><i class="fa fa-check"></i><b>4.3</b> plantTracker</a></li>
<li class="chapter" data-level="4.4" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#workflow-with-example-dataset"><i class="fa fa-check"></i><b>4.4</b> Workflow with example dataset</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#reading-the-publications"><i class="fa fa-check"></i><b>4.4.1</b> 1. Reading the publications</a></li>
<li class="chapter" data-level="4.4.2" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#sketching-an-outline-of-the-ipm"><i class="fa fa-check"></i><b>4.4.2</b> 2. Sketching an outline of the IPM</a></li>
<li class="chapter" data-level="4.4.3" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#making-the-parameter-shopping-list"><i class="fa fa-check"></i><b>4.4.3</b> 3. Making the parameter “shopping list”</a></li>
<li class="chapter" data-level="4.4.4" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#taking-inventory"><i class="fa fa-check"></i><b>4.4.4</b> 4. Taking inventory</a></li>
<li class="chapter" data-level="4.4.5" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#creating-a-new-r-project"><i class="fa fa-check"></i><b>4.4.5</b> 5. Creating a new R project</a></li>
<li class="chapter" data-level="4.4.6" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#data-formatting"><i class="fa fa-check"></i><b>4.4.6</b> 6. Data formatting</a></li>
<li class="chapter" data-level="4.4.7" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#plotting-the-raw-data"><i class="fa fa-check"></i><b>4.4.7</b> 7. Plotting the raw data</a></li>
<li class="chapter" data-level="4.4.8" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#fitting-vital-rate-models-for-the-mean-ipm"><i class="fa fa-check"></i><b>4.4.8</b> 8. Fitting vital rate models for the mean IPM</a></li>
<li class="chapter" data-level="4.4.9" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#building-the-ipm-from-scratch"><i class="fa fa-check"></i><b>4.4.9</b> 9. Building the IPM from scratch</a></li>
<li class="chapter" data-level="4.4.10" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#building-the-ipm-with-ipmr"><i class="fa fa-check"></i><b>4.4.10</b> 10. Building the IPM with <code>ipmr</code></a></li>
<li class="chapter" data-level="4.4.11" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#populating-the-padrino-database-template"><i class="fa fa-check"></i><b>4.4.11</b> 11. Populating the PADRINO database template</a></li>
<li class="chapter" data-level="4.4.12" data-path="adler-dataset-example-of-workflow.html"><a href="adler-dataset-example-of-workflow.html#finishing-up-the-digitization-project"><i class="fa fa-check"></i><b>4.4.12</b> 12. Finishing up the digitization project</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="adler-dataset-extensions-to-the-mean-ipm.html"><a href="adler-dataset-extensions-to-the-mean-ipm.html"><i class="fa fa-check"></i><b>5</b> Adler Dataset: Extensions to the Mean IPM</a>
<ul>
<li class="chapter" data-level="5.1" data-path="adler-dataset-extensions-to-the-mean-ipm.html"><a href="adler-dataset-extensions-to-the-mean-ipm.html#exploring-our-options"><i class="fa fa-check"></i><b>5.1</b> Exploring our options</a></li>
<li class="chapter" data-level="5.2" data-path="adler-dataset-extensions-to-the-mean-ipm.html"><a href="adler-dataset-extensions-to-the-mean-ipm.html#plotting-by-year-x-treatment"><i class="fa fa-check"></i><b>5.2</b> Plotting by year x treatment</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><i class="fa fa-check"></i><b>6</b> Adler Dataset: Extensions to the Mean IPM - Incorporating Year</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#making-the-parameter-shopping-list-1"><i class="fa fa-check"></i><b>6.0.1</b> 3. Making the parameter “shopping list”</a></li>
<li class="chapter" data-level="6.0.2" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#creating-new-folders-in-the-r-project"><i class="fa fa-check"></i><b>6.0.2</b> 5. Creating new folders in the R project</a></li>
<li class="chapter" data-level="6.0.3" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#data-formatting-1"><i class="fa fa-check"></i><b>6.0.3</b> 6. Data formatting</a></li>
<li class="chapter" data-level="6.0.4" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#plotting-the-raw-data-by-year"><i class="fa fa-check"></i><b>6.0.4</b> 7. Plotting the raw data by year</a></li>
<li class="chapter" data-level="6.0.5" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#fitting-vital-rate-models-with-the-random-effect-of-year"><i class="fa fa-check"></i><b>6.0.5</b> 8. Fitting vital rate models with the random effect of year</a></li>
<li class="chapter" data-level="6.0.6" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#building-the-year-specific-ipms-from-scratch"><i class="fa fa-check"></i><b>6.0.6</b> 9. Building the year-specific IPMs from scratch</a></li>
<li class="chapter" data-level="6.0.7" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#building-the-year-specific-ipms-with-ipmr"><i class="fa fa-check"></i><b>6.0.7</b> 10. Building the year-specific IPMs with <code>ipmr</code></a></li>
<li class="chapter" data-level="6.0.8" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#populating-the-padrino-database-template-1"><i class="fa fa-check"></i><b>6.0.8</b> 11. Populating the PADRINO database template</a></li>
<li class="chapter" data-level="6.0.9" data-path="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html"><a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html#finishing-up-the-digitization-project-1"><i class="fa fa-check"></i><b>6.0.9</b> 12. Finishing up the digitization project</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RUPDemo Digitization Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="adler-dataset-extensions-to-the-mean-ipm" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Adler Dataset: Extensions to the Mean IPM<a href="adler-dataset-extensions-to-the-mean-ipm.html#adler-dataset-extensions-to-the-mean-ipm" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In Chapter 4, we followed the workflow to produce the mean IPM from our example dataset, <em>Bouteloua gracilis</em> from the Colorado site of the Adler dataset. However, this dataset had the potential to create as many as 125 other IPMs which we did not explore! This document aims to show how we constructed IPMs for each specific yearly transition, and how we might approach incorporating different treatments into our IPMs.</p>
<p>This document assumes you have already read through Chapter 4, and only includes steps which deviate from the workflow described previously. If you are working with a similar dataset with hierarchical structure/nestedness, it would be a good idea to work out of a different subfolder in the overall R project to differentiate the mean model workflow from different workflows exploring levels of nestedness in the data.</p>
<div id="exploring-our-options" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Exploring our options<a href="adler-dataset-extensions-to-the-mean-ipm.html#exploring-our-options" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First, recall the 126 possible IPMs we could build from the <em>Bouteloua gracilis</em> dataset. We have 13 transitions (14 years) of data, across six pastures, each of which contained four plots with unique grazing treatments. In theory, we could construct the following IPMs:</p>
<ul>
<li>1 IPM per transition, all plots aggregated (13 IPMs)<br />
</li>
<li><strong>1 IPM using mean parameter values across all transitions and all plots (1 IPM)</strong> ← we did this in Chapter 4</li>
<li>1 IPM per transition, per treatment combination (13 x 4 = 52 IPMs)<br />
</li>
<li>1 IPM per treatment combination, using mean parameter values across all transitions (4 IPMs)<br />
</li>
<li>1 IPM per transition, per historical treatment, ignoring the current treatment (13 x 2 = 26 IPMs)<br />
</li>
<li>1 IPM per historical treatment, using mean parameter values across all transitions and ignoring the current treatment (2 IPMs)<br />
</li>
<li>1 IPM per transition, per current treatment, ignoring the historical treatment (13 x 2 = 26 IPMs)<br />
</li>
<li>1 IPM per current treatment, using mean parameter values across all transitions and ignoring the historical treatment (2 IPMs)</li>
</ul>
<p>We could take this even further by incorporating the six different pastures as an added level of complexity; however, this random effect would certainly not have sufficient data to consider, so we will simply treat the different pastures as replicates of the different treatments.</p>
Let’s also take a look again at this table, which describes the number of observations in each treatment for each year:
<center>
<table class='gmisc_table' style='border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;' >
<thead>
<tr><th style='border-bottom: 1px solid grey; border-top: 2px solid grey;'></th>
<th style='font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;'>gzgz</th>
<th style='font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;'>gzun</th>
<th style='font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;'>ungz</th>
<th style='font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;'>unun</th>
<th style='font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;'>Total</th>
</tr>
</thead>
<tbody>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>1997</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">10</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">6</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">14</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">12</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">42</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>1998</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">16</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">8</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">15</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">19</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">58</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>1999</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">43</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">29</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">33</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">54</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">159</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2000</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">43</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">5</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">20</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">16</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">84</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2001</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">54</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">23</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">45</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">52</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">174</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2002</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">123</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">22</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">65</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">724</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">934</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2003</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">99</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">12</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">38</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">137</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">286</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2004</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">118</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">18</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">53</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">94</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">283</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2005</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">78</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">14</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">46</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">35</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">173</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2006</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">67</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">10</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">104</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">52</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">233</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2007</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">143</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">39</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">46</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">86</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">314</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2008</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">134</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">50</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">64</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">94</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">342</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2009</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">90</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">40</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">45</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">70</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">245</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; text-align: left;'>2010</td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">71</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">29</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">53</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:darkred;">67</span></td>
<td style='padding-left: 1em; padding-right: 1em; text-align: center;'><span style="color:forestgreen;">220</span></td>
</tr>
<tr>
<td style='padding-left: 1em; padding-right: 1em; border-bottom: 2px solid grey; border-top: 1px solid #BEBEBE; font-weight: 900; text-align: left;'>Total</td>
<td style='padding-left: 1em; padding-right: 1em; border-bottom: 2px solid grey; border-top: 1px solid #BEBEBE; font-weight: 900; text-align: center;'><span style="color:forestgreen;">1089</span></td>
<td style='padding-left: 1em; padding-right: 1em; border-bottom: 2px solid grey; border-top: 1px solid #BEBEBE; font-weight: 900; text-align: center;'><span style="color:forestgreen;">305</span></td>
<td style='padding-left: 1em; padding-right: 1em; border-bottom: 2px solid grey; border-top: 1px solid #BEBEBE; font-weight: 900; text-align: center;'><span style="color:forestgreen;">641</span></td>
<td style='padding-left: 1em; padding-right: 1em; border-bottom: 2px solid grey; border-top: 1px solid #BEBEBE; font-weight: 900; text-align: center;'><span style="color:forestgreen;">1512</span></td>
<td style='padding-left: 1em; padding-right: 1em; border-bottom: 2px solid grey; border-top: 1px solid #BEBEBE; font-weight: 900; text-align: center;'><span style="color:forestgreen;">3547</span></td>
</tr>
</tbody>
</table>
</center>
<p>Only a few treatment x year combinations have enough individuals for IPMs, and when we aggregate all individuals across all treatments, most years have sufficient individuals to construct IPMs (if only barely). Additionally, if we aggregate all individuals across all years for each treatment combination then all treatment combinations have sufficient individuals to construct IPMs. From our list above, we can then consider constructing 21 more IPMs:</p>
<ul>
<li>1 IPM per transition, all plots aggregated (13 IPMs)<br />
</li>
<li>1 IPM per treatment combination, using mean parameter values across all transitions (4 IPMs)<br />
</li>
<li>1 IPM per historical treatment, using mean parameter values across all transitions and ignoring the current treatment (2 IPMs)<br />
</li>
<li>1 IPM per current treatment, using mean parameter values across all transitions and ignoring the historical treatment (2 IPMs)</li>
</ul>
<p>We will follow a slightly modified workflow from Chapter 4, since we are already familiar with the data and the basic structure of the models. In Chapter 6, we will begin by introducing the random effect of year to the basic models we constructed in Chapter 4 to build 13 new IPMs, one for each transition. Then, in Chapter 7, we will introduce the treatments to the basic model to build eight new IPMs and examine the effect of the different levels of the grazing treatments on the population growth rate.</p>
</div>
<div id="plotting-by-year-x-treatment" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Plotting by year x treatment<a href="adler-dataset-extensions-to-the-mean-ipm.html#plotting-by-year-x-treatment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before we jump into the next models, let’s take a moment to explore the dataset a bit more in-depth than we have previously. We will start with the cleaned data, where we have updated the sizes of three individuals to no longer be smaller than the minimum size, since we already modified these data for the mean model.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> ( ggplot2 )</span>
<span id="cb113-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>( patchwork )</span>
<span id="cb113-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb113-3" aria-hidden="true" tabindex="-1"></a>grow <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/aspen1030/RUPDemo/main/growth_df_mod.csv&quot;</span>)</span>
<span id="cb113-4"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb113-4" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/aspen1030/RUPDemo/main/survival_df_mod.csv&quot;</span>)</span>
<span id="cb113-5"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb113-5" aria-hidden="true" tabindex="-1"></a>recr <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/aspen1030/RUPDemo/main/recruitment_df_mod.csv&quot;</span>)</span>
<span id="cb113-6"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb113-6" aria-hidden="true" tabindex="-1"></a>Bou_gra <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/aspen1030/RUPDemo/main/Bou_gra_clean.csv&quot;</span>)</span></code></pre></div>
<p>When we created the mean model IPM, we aggregated all observations across year and treatment and created single plots for each vital rate. Let’s now examine plots showing the vital rate data for all year x treatment combinations, starting with survival.</p>
<p>First we will set up a function to calculate the binned data at the scale of every year x treatment combination:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-1" aria-hidden="true" tabindex="-1"></a>df_binned_prop <span class="ot">&lt;-</span> <span class="cf">function</span>(ii, df_in, n_bins, siz_var, rsp_var, grid_y_l){</span>
<span id="cb114-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make sub-selection of data</span></span>
<span id="cb114-4"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-4" aria-hidden="true" tabindex="-1"></a>  df   <span class="ot">&lt;-</span> <span class="fu">subset</span>( df_in, Year <span class="sc">==</span> grid_y_l<span class="sc">$</span>Year[ii] <span class="sc">&amp;</span> </span>
<span id="cb114-5"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-5" aria-hidden="true" tabindex="-1"></a>                   Treatment  <span class="sc">==</span> grid_y_l<span class="sc">$</span>Treatment[ii] )</span>
<span id="cb114-6"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-7"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>( <span class="fu">nrow</span>( df ) <span class="sc">==</span> <span class="dv">0</span> ) <span class="fu">return</span>( <span class="cn">NULL</span> )</span>
<span id="cb114-8"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-9"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-9" aria-hidden="true" tabindex="-1"></a>  size_var <span class="ot">&lt;-</span> <span class="fu">deparse</span>( <span class="fu">substitute</span>( siz_var ) )</span>
<span id="cb114-10"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-10" aria-hidden="true" tabindex="-1"></a>  resp_var <span class="ot">&lt;-</span> <span class="fu">deparse</span>( <span class="fu">substitute</span>( rsp_var ) )</span>
<span id="cb114-11"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-12"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># binned survival probabilities</span></span>
<span id="cb114-13"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-13" aria-hidden="true" tabindex="-1"></a>  h    <span class="ot">&lt;-</span> ( <span class="fu">max</span>(df[,size_var], <span class="at">na.rm =</span> T ) <span class="sc">-</span> <span class="fu">min</span>( df[,size_var], <span class="at">na.rm =</span> T ) ) <span class="sc">/</span> n_bins</span>
<span id="cb114-14"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-14" aria-hidden="true" tabindex="-1"></a>  lwr  <span class="ot">&lt;-</span> <span class="fu">min</span>( df[,size_var], <span class="at">na.rm =</span> T ) <span class="sc">+</span> ( h <span class="sc">*</span> <span class="fu">c</span>( <span class="dv">0</span><span class="sc">:</span>( n_bins <span class="sc">-</span> <span class="dv">1</span> ) ) )</span>
<span id="cb114-15"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-15" aria-hidden="true" tabindex="-1"></a>  upr  <span class="ot">&lt;-</span> lwr <span class="sc">+</span> h</span>
<span id="cb114-16"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-16" aria-hidden="true" tabindex="-1"></a>  mid  <span class="ot">&lt;-</span> lwr <span class="sc">+</span> ( <span class="dv">1</span><span class="sc">/</span><span class="dv">2</span> <span class="sc">*</span> h )</span>
<span id="cb114-17"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-18"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-18" aria-hidden="true" tabindex="-1"></a>  binned_prop <span class="ot">&lt;-</span> <span class="cf">function</span>( lwr_x, upr_x, response ){</span>
<span id="cb114-19"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb114-20"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-20" aria-hidden="true" tabindex="-1"></a>    id  <span class="ot">&lt;-</span> <span class="fu">which</span>( df[,size_var] <span class="sc">&gt;</span> lwr_x <span class="sc">&amp;</span> df[,size_var] <span class="sc">&lt;</span> upr_x ) </span>
<span id="cb114-21"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-21" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> df[id,]</span>
<span id="cb114-22"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb114-23"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( response <span class="sc">==</span> <span class="st">&#39;prob&#39;</span> ){   <span class="fu">return</span>( <span class="fu">sum</span>( tmp[,resp_var], <span class="at">na.rm =</span> T ) <span class="sc">/</span> <span class="fu">nrow</span>( tmp ) ) }</span>
<span id="cb114-24"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( response <span class="sc">==</span> <span class="st">&#39;n_size&#39;</span> ){ <span class="fu">return</span>( <span class="fu">nrow</span>( tmp ) ) }</span>
<span id="cb114-25"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb114-26"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb114-27"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-28"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-28" aria-hidden="true" tabindex="-1"></a>  y_binned <span class="ot">&lt;-</span> <span class="fu">Map</span>( binned_prop, lwr, upr, <span class="st">&#39;prob&#39;</span> ) <span class="sc">%&gt;%</span> unlist</span>
<span id="cb114-29"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-29" aria-hidden="true" tabindex="-1"></a>  x_binned <span class="ot">&lt;-</span> mid</span>
<span id="cb114-30"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-30" aria-hidden="true" tabindex="-1"></a>  y_n_size <span class="ot">&lt;-</span> <span class="fu">Map</span>( binned_prop, lwr, upr, <span class="st">&#39;n_size&#39;</span> ) <span class="sc">%&gt;%</span> unlist</span>
<span id="cb114-31"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-32"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># output data frame</span></span>
<span id="cb114-33"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>( <span class="at">xx  =</span> x_binned, </span>
<span id="cb114-34"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-34" aria-hidden="true" tabindex="-1"></a>              <span class="at">yy  =</span> y_binned,</span>
<span id="cb114-35"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-35" aria-hidden="true" tabindex="-1"></a>              <span class="at">nn  =</span> y_n_size ) <span class="sc">%&gt;%</span> </span>
<span id="cb114-36"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setNames</span>( <span class="fu">c</span>( size_var, resp_var, <span class="st">&#39;n_size&#39;</span> ) ) <span class="sc">%&gt;%</span> </span>
<span id="cb114-37"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>( <span class="at">Year      =</span> grid_y_l<span class="sc">$</span>Year[ii], </span>
<span id="cb114-38"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-38" aria-hidden="true" tabindex="-1"></a>            <span class="at">Treatment =</span> grid_y_l<span class="sc">$</span>Treatment[ii] )</span>
<span id="cb114-39"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-40"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb114-40" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, we need to use <code>expand.grid( )</code> to create a dataframe of all year x treatment combinations that we can use as the input to the function we created:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb115-1" aria-hidden="true" tabindex="-1"></a>grid_y_t    <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>( <span class="at">Year      =</span> surv<span class="sc">$</span>Year <span class="sc">%&gt;%</span> unique <span class="sc">%&gt;%</span> sort,</span>
<span id="cb115-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb115-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">Treatment =</span> surv<span class="sc">$</span>Treatment <span class="sc">%&gt;%</span> unique <span class="sc">%&gt;%</span> sort,</span>
<span id="cb115-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb115-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">stringsAsFactors =</span> F )</span></code></pre></div>
<p>Then we use <code>lapply( )</code> to apply our binning function across all treatment x year combinations:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb116-1" aria-hidden="true" tabindex="-1"></a>surv_bin_t  <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>( grid_y_t ), df_binned_prop, Bou_gra, <span class="dv">10</span>, </span>
<span id="cb116-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb116-2" aria-hidden="true" tabindex="-1"></a>                      logsize, survives_tplus1, grid_y_t )</span></code></pre></div>
<p>And now we can create a big dataframe to plot the survival data in a large “panel plot”:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-1" aria-hidden="true" tabindex="-1"></a>surv_t_pan_df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>( surv_bin_t ) <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">trt_lab    =</span> Treatment ) <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">transition =</span> <span class="fu">paste</span>( <span class="fu">paste0</span>( Year ),</span>
<span id="cb117-4"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-4" aria-hidden="true" tabindex="-1"></a>                                              <span class="fu">substr</span>( <span class="fu">paste0</span>( Year <span class="sc">+</span> <span class="dv">1</span> ), <span class="dv">3</span>, <span class="dv">4</span> ),</span>
<span id="cb117-5"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-5" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">sep =</span> <span class="st">&#39;-&#39;</span> ) ) <span class="sc">%&gt;%</span> </span>
<span id="cb117-6"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-6" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">year       =</span> <span class="fu">as.integer</span>( Year <span class="sc">-</span> <span class="dv">1996</span> ),</span>
<span id="cb117-7"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">treatment  =</span> Treatment <span class="sc">%&gt;%</span> as.factor <span class="sc">%&gt;%</span> as.integer )</span>
<span id="cb117-8"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-9"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="at">data  =</span> surv_t_pan_df, <span class="fu">aes</span>( <span class="at">x =</span> logsize, <span class="at">y =</span> survives_tplus1 ) ) <span class="sc">+</span></span>
<span id="cb117-10"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb117-11"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">pch   =</span> <span class="dv">16</span>,</span>
<span id="cb117-12"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">size  =</span> <span class="fl">0.7</span>,</span>
<span id="cb117-13"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb117-14"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>( <span class="at">breaks =</span> <span class="fu">c</span>( <span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.9</span> ) ) <span class="sc">+</span></span>
<span id="cb117-15"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split in panels</span></span>
<span id="cb117-16"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>( trt_lab <span class="sc">~</span> transition ) <span class="sc">+</span></span>
<span id="cb117-17"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>( ) <span class="sc">+</span></span>
<span id="cb117-18"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">axis.text     =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span> ),</span>
<span id="cb117-19"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">title         =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">10</span> ),</span>
<span id="cb117-20"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.text.y  =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span>,</span>
<span id="cb117-21"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-21" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">margin =</span> <span class="fu">margin</span>( <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>,</span>
<span id="cb117-22"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-22" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&#39;mm&#39;</span>) ),</span>
<span id="cb117-23"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.text.x  =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span>,</span>
<span id="cb117-24"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-24" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">margin =</span> <span class="fu">margin</span>( <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>,</span>
<span id="cb117-25"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-25" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&#39;mm&#39;</span>) ),</span>
<span id="cb117-26"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.switch.pad.wrap =</span> <span class="fu">unit</span>( <span class="st">&#39;0.5&#39;</span>, <span class="at">unit=</span><span class="st">&#39;mm&#39;</span> ),</span>
<span id="cb117-27"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">panel.spacing         =</span> <span class="fu">unit</span>( <span class="st">&#39;0.5&#39;</span>, <span class="at">unit=</span><span class="st">&#39;mm&#39;</span> ) ) <span class="sc">+</span></span>
<span id="cb117-28"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>( <span class="at">x =</span> <span class="fu">expression</span>( <span class="st">&#39;log(size)&#39;</span>[t0] ),</span>
<span id="cb117-29"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb117-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="fu">expression</span>( <span class="st">&#39;Survival to time t1&#39;</span> ) )</span></code></pre></div>
<p><img src="rupdemo-webpage_files/figure-html/unnamed-chunk-55-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>At this scale, it’s kinda hard to tell what’s going on. The deficit of data we noticed in the first few years combined with the unequal amount of datapoints in each treatment makes the data fairly noisy in certain years. Even though the data indicate that there might be a significant year x treatment effect in the model, we do not have sufficient data to model this effect.</p>
<p>Now we will look at the growth data. First we need to create the appropriate dataframe to make a “panel plot” like we did with the survival data:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb118-1" aria-hidden="true" tabindex="-1"></a>grow_t_pan_df <span class="ot">&lt;-</span> grow <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb118-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">trt_lab    =</span> Treatment ) <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb118-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">transition =</span> <span class="fu">paste</span>( <span class="fu">paste0</span>( Year ),</span>
<span id="cb118-4"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb118-4" aria-hidden="true" tabindex="-1"></a>                                              <span class="fu">substr</span>( <span class="fu">paste0</span>( Year <span class="sc">+</span> <span class="dv">1</span> ), <span class="dv">3</span>, <span class="dv">4</span> ),</span>
<span id="cb118-5"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb118-5" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">sep =</span> <span class="st">&#39;-&#39;</span> ) ) <span class="sc">%&gt;%</span> </span>
<span id="cb118-6"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb118-6" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">year       =</span> <span class="fu">as.integer</span>( Year <span class="sc">-</span> <span class="dv">1996</span> ),</span>
<span id="cb118-7"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb118-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">treatment  =</span> Treatment <span class="sc">%&gt;%</span> as.factor <span class="sc">%&gt;%</span> as.integer )</span></code></pre></div>
<p>Let’s take a look at the panel plot:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data  =</span> grow_t_pan_df, <span class="fu">aes</span>( <span class="at">x =</span> logsize, <span class="at">y =</span> <span class="fu">log</span>( size_tplus1 ) ) ) <span class="sc">+</span></span>
<span id="cb119-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb119-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">pch   =</span> <span class="dv">16</span>,</span>
<span id="cb119-4"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">size  =</span> <span class="fl">0.7</span>,</span>
<span id="cb119-5"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&#39;red&#39;</span> ) <span class="sc">+</span></span>
<span id="cb119-6"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split in panels</span></span>
<span id="cb119-7"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>( trt_lab <span class="sc">~</span> transition ) <span class="sc">+</span></span>
<span id="cb119-8"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>( ) <span class="sc">+</span></span>
<span id="cb119-9"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">axis.text     =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span> ),</span>
<span id="cb119-10"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">title         =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">10</span> ),</span>
<span id="cb119-11"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.text.y  =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span>,</span>
<span id="cb119-12"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-12" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">margin =</span> <span class="fu">margin</span>( <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>,</span>
<span id="cb119-13"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-13" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&#39;mm&#39;</span> ) ),</span>
<span id="cb119-14"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.text.x  =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span>,</span>
<span id="cb119-15"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-15" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">margin =</span> <span class="fu">margin</span>( <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>,</span>
<span id="cb119-16"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-16" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&#39;mm&#39;</span> ) ),</span>
<span id="cb119-17"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.switch.pad.wrap =</span> <span class="fu">unit</span>( <span class="st">&#39;0.5&#39;</span>, <span class="at">unit =</span> <span class="st">&#39;mm&#39;</span> ),</span>
<span id="cb119-18"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">panel.spacing         =</span> <span class="fu">unit</span>( <span class="st">&#39;0.5&#39;</span>, <span class="at">unit =</span> <span class="st">&#39;mm&#39;</span> ) ) <span class="sc">+</span></span>
<span id="cb119-19"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>( <span class="at">x =</span> <span class="fu">expression</span>( <span class="st">&#39;log( size )&#39;</span>[t0] ),</span>
<span id="cb119-20"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb119-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="fu">expression</span>( <span class="st">&#39;log( size )&#39;</span>[t1] ) )</span></code></pre></div>
<p><img src="rupdemo-webpage_files/figure-html/unnamed-chunk-57-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>As with the survival data, the deficit of data in the earlier years and the difference in the number of datapoints across treatments is fairly apparent in this plot. Any effect of year x treatment might simply be due to the different sample sizes, and may not actually reflect any biological processes.</p>
<p>Now we should look at the recruitment data. We will plot the number of adults at time t0 on the x axis, and the number of recruits at time t1 on the y axis. First we need to create the dataframe for a “panel plot” like we did with the survival and growth data:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-1" aria-hidden="true" tabindex="-1"></a>recr<span class="sc">$</span>Treatment <span class="ot">&lt;-</span> <span class="fu">substr</span>( recr<span class="sc">$</span>Quad, <span class="dv">1</span>, <span class="dv">4</span> )</span>
<span id="cb120-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-3" aria-hidden="true" tabindex="-1"></a>indiv_yr_trt <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb120-4"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>( Quad ) <span class="sc">%&gt;%</span></span>
<span id="cb120-5"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>( Year ) <span class="sc">%&gt;%</span> </span>
<span id="cb120-6"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>( <span class="at">n_adults =</span> n ) <span class="sc">%&gt;%</span> </span>
<span id="cb120-7"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">Year =</span> Year <span class="sc">+</span> <span class="dv">1</span> )</span>
<span id="cb120-8"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-9"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-9" aria-hidden="true" tabindex="-1"></a>recr_trt <span class="ot">&lt;-</span> recr <span class="sc">%&gt;%</span></span>
<span id="cb120-10"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>( indiv_yr_trt ) <span class="sc">%&gt;%</span></span>
<span id="cb120-11"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb120-11" aria-hidden="true" tabindex="-1"></a>  drop_na</span></code></pre></div>
<pre><code>## Joining with `by = join_by(Quad, Year)`</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb122-1" aria-hidden="true" tabindex="-1"></a>recr_t_pan_df <span class="ot">&lt;-</span> recr_trt <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb122-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">trt_lab    =</span> Treatment ) <span class="sc">%&gt;%</span> </span>
<span id="cb122-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb122-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">transition =</span> <span class="fu">paste</span>( <span class="fu">paste0</span>( Year ),</span>
<span id="cb122-4"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb122-4" aria-hidden="true" tabindex="-1"></a>                                              <span class="fu">substr</span>( <span class="fu">paste0</span>( Year <span class="sc">+</span> <span class="dv">1</span> ), <span class="dv">3</span>, <span class="dv">4</span> ),</span>
<span id="cb122-5"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb122-5" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">sep =</span> <span class="st">&#39;-&#39;</span> ) ) <span class="sc">%&gt;%</span> </span>
<span id="cb122-6"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb122-6" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>( <span class="at">year       =</span> <span class="fu">as.integer</span>( Year <span class="sc">-</span> <span class="dv">1996</span> ),</span>
<span id="cb122-7"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb122-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">treatment  =</span> Treatment <span class="sc">%&gt;%</span> as.factor <span class="sc">%&gt;%</span> as.integer )</span></code></pre></div>
<p>And now the panel plot (dropping that one outlier with over 600 individuals in a single plot so we can actually view the data):</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-1" aria-hidden="true" tabindex="-1"></a>recr_t_pan_df <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>( n_adults <span class="sc">&lt;</span> <span class="dv">600</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb123-3"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>( NRquad <span class="sc">&lt;</span> <span class="dv">600</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb123-4"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>( <span class="at">x =</span> n_adults, <span class="at">y =</span> NRquad ) ) <span class="sc">+</span></span>
<span id="cb123-5"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb123-6"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">pch   =</span> <span class="dv">16</span>,</span>
<span id="cb123-7"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">size  =</span> <span class="fl">0.7</span>,</span>
<span id="cb123-8"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&#39;red&#39;</span> ) <span class="sc">+</span></span>
<span id="cb123-9"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split in panels</span></span>
<span id="cb123-10"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>( trt_lab <span class="sc">~</span> transition ) <span class="sc">+</span></span>
<span id="cb123-11"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>( ) <span class="sc">+</span></span>
<span id="cb123-12"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">axis.text     =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span> ),</span>
<span id="cb123-13"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">title         =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">10</span> ),</span>
<span id="cb123-14"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.text.y  =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span>,</span>
<span id="cb123-15"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-15" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">margin =</span> <span class="fu">margin</span>( <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>,</span>
<span id="cb123-16"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-16" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&#39;mm&#39;</span> ) ),</span>
<span id="cb123-17"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.text.x  =</span> <span class="fu">element_text</span>( <span class="at">size   =</span> <span class="dv">8</span>,</span>
<span id="cb123-18"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">margin =</span> <span class="fu">margin</span>( <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>,</span>
<span id="cb123-19"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-19" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&#39;mm&#39;</span> ) ),</span>
<span id="cb123-20"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">strip.switch.pad.wrap =</span> <span class="fu">unit</span>( <span class="st">&#39;0.5&#39;</span>, <span class="at">unit =</span> <span class="st">&#39;mm&#39;</span> ),</span>
<span id="cb123-21"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">panel.spacing         =</span> <span class="fu">unit</span>( <span class="st">&#39;0.5&#39;</span>, <span class="at">unit =</span> <span class="st">&#39;mm&#39;</span> ) ) <span class="sc">+</span></span>
<span id="cb123-22"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>( <span class="at">x =</span> <span class="st">&quot;Number of adults at time t0&quot;</span>,</span>
<span id="cb123-23"><a href="adler-dataset-extensions-to-the-mean-ipm.html#cb123-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Number of recruits at time t1&quot;</span> )</span></code></pre></div>
<p><img src="rupdemo-webpage_files/figure-html/unnamed-chunk-59-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>As with the survival and growth data, there seems to be differences in the recruitment data across the different year x treatment combinations, but again, it is difficult to discern any prominent patterns.</p>
<p>Considering these three plots, we can see how fitting models that consider both the effects of year and treatment might result in overconfident predictions, due to the considerable inconsistency in the number of observations across each treatment x year combination. However, if we had found noticeable differences in the patterns of any of the vital rate data across each treatment x year, this might provide an opportunity to continue exploring the data or consider other ways to model the vital rates. Taking a moment to plot every combination of treatments and years can be a valuable exercise in understanding the data you are working with, and hopefully this chapter can provide a framework of example code to produce similar graphs in your own projects.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="adler-dataset-example-of-workflow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="adler-dataset-extensions-to-the-mean-ipm---incorporating-year.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
